<!DOCTYPE html>
<html lang="hu" data-app-version="2.8.0">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#356dff" />
  <meta name="description" content="SzÃ¡mold ki, mennyi munkaÃ³rÃ¡dba kerÃ¼l egy vÃ¡sÃ¡rlÃ¡s!" />
  
  <title>MunkaÃ³ra â€¢ Pro</title>
  
  <link rel="manifest" href="manifest.json" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="MunkaÃ³ra" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />
  <link rel="icon" type="image/png" href="icons/icon-192.png" />
  <link rel="stylesheet" href="styles.css" />
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-G8BZPSFGGG"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-G8BZPSFGGG');
  </script>
</head>
<body>
  <div id="updateBanner" class="update-banner hidden">
    <span>ğŸ‰ Ãšj verziÃ³ elÃ©rhetÅ‘!</span>
    <button id="updateNow" class="update-btn">FrissÃ­tÃ©s most</button>
    <button id="dismissUpdate" class="update-btn" style="background:rgba(255,255,255,0.15);">KÃ©sÅ‘bb</button>
  </div>

  <div id="appVersion" style="position:fixed;left:8px;top:6px;font-size:11px;color:#5d6b85;opacity:.8;z-index:50;">v2.7.0 PWA</div>

  <div id="shareWidget" class="share-widget">
    <div class="share-bubble" onclick="handleShare()">
      <button class="share-close" onclick="closeShareWidget(event)" aria-label="BezÃ¡rÃ¡s">Ã—</button>
      <div class="share-icon">ğŸš€</div>
      <div class="share-text">
        Oszd meg barÃ¡taiddal!
        <small>Kattints a megosztÃ¡shoz</small>
      </div>
    </div>
  </div>

  <div class="app-shell">
    <main class="screen-stack">
      <!-- Welcome Screen -->
      <section id="screen-welcome" class="screen active">
        <div class="welcome-hero">
          <div class="welcome-pill">ğŸ’° SzÃ¡molj Ã©s legyÃ©l szomorÃº!</div>
          <h1>MunkaÃ³ra</h1>
          <div class="hero-clock" role="img" aria-label="Alarm clock">
            <div class="clock-body">
              <div class="clock-hand hour"></div>
              <div class="clock-hand minute"></div>
            </div>
            <div class="clock-bell left"></div>
            <div class="clock-bell right"></div>
            <div class="clock-leg left"></div>
            <div class="clock-leg right"></div>
          </div>
          <p class="welcome-copy">SzÃ¡mold ki, mennyi munkaÃ³rÃ¡dba kerÃ¼l egy vÃ¡gyott vÃ¡sÃ¡rlÃ¡s Ã©s Ã©rezd nagyon rosszul magad!</p>
          <div id="inviteCard" class="card invite-card">
            <h3>ğŸ”‘ MeghÃ­vÃ³ szÃ¼ksÃ©ges</h3>
            <p class="invite-copy">Add meg az invite kÃ³dodat a MunkaÃ³ra Pro Ã©lmÃ©ny elÃ©rÃ©sÃ©hez.</p>
            <div class="invite-form">
              <input id="inviteCodeInput" placeholder="Pl. 1843-5092-JKLP" autocomplete="one-time-code" inputmode="text" />
              <button type="button" onclick="validateInvite()">âœ… KÃ³d ellenÅ‘rzÃ©se</button>
            </div>
            <div id="inviteStatus" class="invite-status" role="status" aria-live="polite"></div>
          </div>
          <div id="startCard" class="card hidden" style="width:100%;">
            <div class="stack">
              <button id="startButton" type="button" onclick="startApp()">ğŸš€ KezdjÃ¼k el!</button>
              <p style="text-align:center;font-size:0.85rem;">MÃ¡r <strong>2,847</strong> felhasznÃ¡lÃ³ spÃ³rolt <strong>18,392</strong> Ã³rÃ¡t! ğŸ‰</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Profile Screen -->
      <section id="screen-profile" class="screen">
        <header class="screen-header">
          <div><span class="caption">MunkaÃ³ra</span><h2>âš™ï¸ Profilod</h2></div>
          <div class="theme-toggle" onclick="toggleTheme()"><svg viewBox="0 0 24 24"><path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg></div>
          <div class="header-icon"><svg viewBox="0 0 24 24"><path d="M12 12.75a5.25 5.25 0 1 0-5.25-5.25A5.26 5.26 0 0 0 12 12.75Zm0 2.25c-3.486 0-7.5 1.757-7.5 4.5a1.5 1.5 0 0 0 1.5 1.5h12a1.5 1.5 0 0 0 1.5-1.5c0-2.743-4.014-4.5-7.5-4.5Z"/></svg></div>
        </header>
        <div class="stack">
          <div class="card stack">
            <p>Add meg az alapadataidat, hogy pontosan lÃ¡ssuk, mennyi idÅ‘t dolgozol egy termÃ©kÃ©rt.</p>
            <input id="setupName" placeholder="ğŸ‘¤ NÃ©v" />
            <input id="setupAge" placeholder="ğŸ‚ Ã‰letkor" type="number" />
            <input id="setupSalary" placeholder="ğŸ’° Havi nettÃ³ jÃ¶vedelem (Ft)" type="number" />
            <input id="setupHours" placeholder="â° Heti munkaÃ³ra" type="number" />
            <button id="saveSetupProfile">ğŸ’¾ MentÃ©s Ã©s tovÃ¡bblÃ©pÃ©s</button>
          </div>
        </div>
      </section>

      <!-- Calculator Screen -->
      <section id="screen-calculator" class="screen">
        <header class="screen-header">
          <div><span class="caption">MunkaÃ³ra</span><h2 id="hello">ğŸ§® KalkulÃ¡tor</h2></div>
          <div class="theme-toggle" onclick="toggleTheme()"><svg viewBox="0 0 24 24"><path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg></div>
          <div class="header-icon"><svg viewBox="0 0 24 24"><path d="M6 2.75h12A3.25 3.25 0 0 1 21.25 6v12A3.25 3.25 0 0 1 18 21.25H6A3.25 3.25 0 0 1 2.75 18V6A3.25 3.25 0 0 1 6 2.75Zm.5 4a.75.75 0 0 0 0 1.5h2a.75.75 0 0 0 0-1.5h-2Zm0 4a.75.75 0 0 0 0 1.5h10a.75.75 0 0 0 0-1.5h-10Zm0 4a.75.75 0 0 0 0 1.5h10a.75.75 0 0 0 0-1.5h-10Z"/></svg></div>
        </header>
        <div class="stack">
          <div class="card">
            <div class="stack">
              <input id="productName" placeholder="ğŸ·ï¸ TermÃ©knÃ©v" />
              <input id="productPrice" placeholder="ğŸ’µ Ãr (Ft)" type="number" />
              <button id="calculateBtn">ğŸ” SzÃ¡molÃ¡s</button>
              <div id="calcResult" class="result-box hidden">
                <div class="hours">0</div>
                <p style="font-size:1.1rem;font-weight:600;">munkaÃ³rÃ¡dba kerÃ¼lne</p>
                <div class="comparison">Ez kÃ¶rÃ¼lbelÃ¼l annyira, mintha...</div>
                <div class="decision-buttons">
                  <button id="saveBtn" class="save">ğŸ’ª MegspÃ³rolom</button>
                  <button id="buyBtn" class="buy">ğŸ›’ Megveszem</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Results Screen -->
      <section id="view-results" class="screen hidden">
        <header class="screen-header">
          <div><span class="caption">MunkaÃ³ra</span><h2>ğŸ“œ ElÅ‘zmÃ©nyek</h2></div>
          <div class="theme-toggle" onclick="toggleTheme()"><svg viewBox="0 0 24 24"><path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg></div>
          <div class="header-icon"><svg viewBox="0 0 24 24"><path d="M12 3.75A8.25 8.25 0 1 0 20.25 12a.75.75 0 0 1 1.5 0 9.75 9.75 0 1 1-3.31-7.324l1.155-1.154a.75.75 0 1 1 1.06 1.06l-2.5 2.5a.75.75 0 0 1-1.28-.53V4.5a.75.75 0 0 1 1.5 0v1.134A8.23 8.23 0 0 0 12 3.75Zm.75 4.5v3.44l2.845 1.705a.75.75 0 0 1-.76 1.29l-3.25-1.95A.75.75 0 0 1 11.25 12V8.25a.75.75 0 0 1 1.5 0Z"/></svg></div>
        </header>
        <div class="stack">
          <div class="card">
            <h3>Ã–sszefoglalÃ³</h3>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:20px;">
              <div style="padding:16px;background:rgba(49,214,159,0.1);border-radius:12px;text-align:center;">
                <p style="font-size:0.85rem;color:var(--muted);margin-bottom:4px;">ğŸ’š SpÃ³rolva</p>
                <p id="totalSaved" style="font-size:1.4rem;font-weight:700;color:#31d69f;">0 Ft</p>
              </div>
              <div style="padding:16px;background:rgba(255,92,106,0.1);border-radius:12px;text-align:center;">
                <p style="font-size:0.85rem;color:var(--muted);margin-bottom:4px;">ğŸ’¸ ElkÃ¶ltve</p>
                <p id="totalSpent" style="font-size:1.4rem;font-weight:700;color:#ff5c6a;">0 Ft</p>
              </div>
            </div>
          </div>
          <div class="card">
            <h3>SzÅ±rÃ©s & KeresÃ©s</h3>
            <input id="searchBox" placeholder="ğŸ” KeresÃ©s (Ctrl+K)..." style="margin-bottom:12px;" />
            <select id="filterSelect" style="margin-bottom:12px;">
              <option value="all">Ã–sszes</option>
              <option value="saved">SpÃ³rolt</option>
              <option value="spent">ElkÃ¶ltÃ¶tt</option>
            </select>
            <select id="sortSelect">
              <option value="date_desc">LegÃºjabb elÅ‘szÃ¶r</option>
              <option value="date_asc">LegrÃ©gebbi elÅ‘szÃ¶r</option>
              <option value="price_desc">Legnagyobb Ã¡r</option>
              <option value="price_asc">Legkisebb Ã¡r</option>
            </select>
          </div>
          <div class="card">
            <ul id="itemList" style="list-style:none;padding:0;"></ul>
          </div>
        </div>
      </section>

      <!-- Stats Screen -->
      <section id="view-stats" class="screen hidden">
        <header class="screen-header">
          <div><span class="caption">MunkaÃ³ra</span><h2>ğŸ“Š StatisztikÃ¡k</h2></div>
          <div class="theme-toggle" onclick="toggleTheme()"><svg viewBox="0 0 24 24"><path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg></div>
          <div class="header-icon"><svg viewBox="0 0 24 24"><path d="M5.75 4A1.75 1.75 0 0 1 7.5 2.25h1A1.75 1.75 0 0 1 10.25 4v15.75a2 2 0 0 1-2 2h-.75a2 2 0 0 1-2-2Zm5.5 5A1.75 1.75 0 0 1 13 7.25h1A1.75 1.75 0 0 1 15.75 9v10.75a2 2 0 0 1-2 2h-.75a2 2 0 0 1-2-2Zm5.5-5A1.75 1.75 0 0 1 18.5 4v15.75a2 2 0 0 1-2 2h-.75a2 2 0 0 1-2-2V4a1.75 1.75 0 0 1 1.75-1.75h1Z"/></svg></div>
        </header>
        <div class="stack">
          <div class="card">
            <canvas id="statsCanvas" width="320" height="180" style="width:100%;height:auto;"></canvas>
          </div>
        </div>
      </section>

      <!-- Goals Screen -->
      <section id="view-goals" class="screen hidden">
        <header class="screen-header">
          <div><span class="caption">MunkaÃ³ra</span><h2>ğŸ¯ CÃ©lok</h2></div>
          <div class="theme-toggle" onclick="toggleTheme()"><svg viewBox="0 0 24 24"><path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg></div>
          <div class="header-icon"><svg viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm0 2a8 8 0 1 1 0 16 8 8 0 0 1 0-16zm3.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-7 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/></svg></div>
        </header>
        <div class="stack">
          <div class="card stack">
            <h3>Havi kÃ¶ltsÃ©gvetÃ©s</h3>
            <input id="monthlyCap" placeholder="Havi limit (Ft)" type="number" />
            <h3 style="margin-top:20px;">MegtakarÃ­tÃ¡si cÃ©l</h3>
            <input id="savingGoal" placeholder="CÃ©l Ã¶sszege (Ft)" type="number" />
            <div id="goalProgressBar" style="width:0%;height:8px;background:linear-gradient(90deg,#31d69f,#28d3c0);border-radius:999px;margin-top:16px;"></div>
            <p id="goalProgressLabel" style="text-align:center;font-size:0.9rem;margin-top:8px;">0%</p>
            <button id="saveGoals" style="margin-top:20px;">ğŸ’¾ MentÃ©s</button>
            <button id="resetGoals" class="btn-secondary">ğŸ”„ Alaphelyzet</button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <nav id="main-nav" class="show">
    <button class="tab active" data-view="calc"><svg viewBox="0 0 24 24"><path d="M6 2.75h12A3.25 3.25 0 0 1 21.25 6v12A3.25 3.25 0 0 1 18 21.25H6A3.25 3.25 0 0 1 2.75 18V6A3.25 3.25 0 0 1 6 2.75Zm.5 4a.75.75 0 0 0 0 1.5h2a.75.75 0 0 0 0-1.5h-2Zm0 4a.75.75 0 0 0 0 1.5h10a.75.75 0 0 0 0-1.5h-10Zm0 4a.75.75 0 0 0 0 1.5h10a.75.75 0 0 0 0-1.5h-10Z"/></svg><span>SzÃ¡mol</span></button>
    <button class="tab" data-view="results"><svg viewBox="0 0 24 24"><path d="M12 3.75A8.25 8.25 0 1 0 20.25 12a.75.75 0 0 1 1.5 0 9.75 9.75 0 1 1-3.31-7.324l1.155-1.154a.75.75 0 1 1 1.06 1.06l-2.5 2.5a.75.75 0 0 1-1.28-.53V4.5a.75.75 0 0 1 1.5 0v1.134A8.23 8.23 0 0 0 12 3.75Zm.75 4.5v3.44l2.845 1.705a.75.75 0 0 1-.76 1.29l-3.25-1.95A.75.75 0 0 1 11.25 12V8.25a.75.75 0 0 1 1.5 0Z"/></svg><span>TÃ¶rtÃ©net</span></button>
    <button class="tab" data-view="stats"><svg viewBox="0 0 24 24"><path d="M5.75 4A1.75 1.75 0 0 1 7.5 2.25h1A1.75 1.75 0 0 1 10.25 4v15.75a2 2 0 0 1-2 2h-.75a2 2 0 0 1-2-2Zm5.5 5A1.75 1.75 0 0 1 13 7.25h1A1.75 1.75 0 0 1 15.75 9v10.75a2 2 0 0 1-2 2h-.75a2 2 0 0 1-2-2Zm5.5-5A1.75 1.75 0 0 1 18.5 4v15.75a2 2 0 0 1-2 2h-.75a2 2 0 0 1-2-2V4a1.75 1.75 0 0 1 1.75-1.75h1Z"/></svg><span>Statisztika</span></button>
    <button class="tab" data-view="goals"><svg viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm0 2a8 8 0 1 1 0 16 8 8 0 0 1 0-16zm3.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm-7 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/></svg><span>CÃ©lok</span></button>
  </nav>

  <div id="profileModal" class="modal hidden">
    <div class="modal-content">
      <h2>Profil szerkesztÃ©se</h2>
      <input id="editName" placeholder="ğŸ‘¤ NÃ©v" />
      <input id="editAge" placeholder="ğŸ‚ Ã‰letkor" type="number" />
      <input id="editSalary" placeholder="ğŸ’° Havi nettÃ³ jÃ¶vedelem (Ft)" type="number" />
      <input id="editHours" placeholder="â° Heti munkaÃ³ra" type="number" />
      <button id="saveEditProfile">ğŸ’¾ MentÃ©s</button>
      <button id="deleteProfile" class="btn-secondary">ğŸ—‘ï¸ TÃ¶rlÃ©s</button>
      <button id="closeModal" class="btn-secondary">BezÃ¡rÃ¡s</button>
    </div>
  </div>

  <div id="snack" class="snack hidden"></div>
  <div id="coach" class="coach-bubble"></div>
  <div id="funnyThreat" class="funny-threat"></div>
  <div id="a2hsPill" class="a2hs-pill">
    <button id="a2hsAction">TelepÃ­tÃ©s</button>
    <button id="a2hsClose">Ã—</button>
  </div>

  <script src="app.js"></script>
</body>
</html>
